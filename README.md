# ![Veloplaneta HR](https://bitbucket.org/skalar_team/veloplaneta_hr_front/raw/11c0c978098b663486054696d926fc7820f47fc2/preview.jpg)

# Veloplaneta HR module
___

HR module for Bitrix24 Veloplaneta

___ 

### Table of contents
___
* [Stack](#markdown-header-stack)
* [Structure](#markdown-header-structure)
* [Versions](#markdown-header-versions)
    * [0.0.0](#markdown-header-000)
    * [0.1.0](#markdown-header-010)
    * [0.2.0](#markdown-header-020)
    * [0.3.0](#markdown-header-030)


### Stack
___
- React
- Redux (state container)
- Redux-Thunk
- Reselect + re-reselect (selectors for Redux)
- ConnectedRouter
- GSAP (animation)
- Jest + Enzyme (testing) 
- Docker (deployment)

### File Structure
___
- **src/**   
    Папка с исходым кодом
- **config/**   
    Глобальные конфиги:
    - *webpack.common* - основная конфигурация webpack
    - *webpack.dev* - конфиг для  development'a
    - *webpack.prod* - конфиг для production'a
- **build/**   
    Build приложения  
    - *static/* - assets
    - *index.html*

### Roles
___

1. ##### Employee  
    - просмотр статуса собственного оценивания;
    - прохождение оценивания. 
2. ##### Supervisor  
    - просмотр статуса оценивания сотрудников отдела;
    - оценивание сотрудников;
    - просмотр структуры 
3. ##### HR  
    - просмотр структуры компании;
    - создание оцениваний;
    - настройка оценивания сотрудников;
    - просмотр статуса оценивания сотрудников компании;
    - итоговая оценка сотрудника;
    - изменение должности сотрудника;
    - просмотр статистики оценивания.
   
### Pages 
___
 
1. ##### Главная страница (страница со списком оцениваний)
    - Navigation;
    - GeneralTitle;
    - Sidebar.
    - AssessmentList;
    - AssessmentQuestions (Supervisor, Employee);
    - AssessmentConclusion (HR).
2. ##### Страница настроек оценивания
    - Navigation;
    - GeneralTitle;
    - Sidebar.
    - AssessmentSettings.
3. ##### Страница управления процессом оценивания   
    - Navigation;
    - GeneralTitle;
    - Sidebar.
    - AssessmentProcess. 
    
### Components
___

1. ##### Navigation
    Отображение навигации по страницам модуля.
    При нажатии на елемент навигации осуществляет переход на соответствующую страницу
    
    - Supervisor permissions:  
        - Доступ только к Главной странице
    - Employee permissions:   
        - Доступ только к Главной странице
    - HR permissions:  
        - Доступ к страницам: Главная страница, Страница настроек, Страница управления процессом оценивания

2. ##### GeneralTitle
    Отображает название модуля и [роль](#markdown-header-roles) пользователя  

3. ##### Sidebar
    1. Отображение данных пользователя
    2. Для руководителя и HR должна быть возможность просмотреть список всех сотрудников компании.
    3. Отображение отделов
    4. Отображение списка сотрудников отдела
    5. HR имеет возможность изменять должность сотрудника отдела.
    6. Отображать модальное окно при изменении должности.

4. ##### AssessmentList   
    1. Вывод в таблицу пользователя (списка пользователей) ожидающего оценки.
    2. Вывод информации о текущем состоянии оценивания сотрудника (оценка руководителя, оценка работника, оценка HR).
    3. Если пользователь не прошел оценивание (руководитель не оценил сотрудника) - отображать кновку с переходом на страницу оценивания (для HR перенаправять на отдельную страницу для проведения встречи).
    4. Если нет пользователей ожидающих оценевания - отображать соответствующую страницу.
    
5. ##### AssessmentQuestions (доступно для Сотрудника и Руководителя) 
    1. Прохождения оценивания сотрудника руководителем или же самим сотрудником.
    2. Оценивание состоит из нескольких шагов, каждый  шаг это группа вопросов по определённой компетенции (Продажи и т.д.)
    3. При завершении каждого шага происходит проверка на заполненость данных. 
    Далее запрос с ответами "улетает" на сервер. При успешной валидации на сервере, отправляется ответ с вопросами следующей компетенции.
    При отправке последнего блока вопросов процесс оценивания завершается и пользователя перенаправляет на главную страницу модуля.
    
    Bad cases:  
    - Не пришли вопросы с сервера;
    - Не удается перейти на следующий шаг;
    - Пользователь ответил не на все вопросы;
    - Превышена макс. длинна комметария.
    
    Обработать отображения ошибок, состаяния ожидание следующего шага
    
6. ##### AssessmentConclusion (доступно только для Рекрутера) 
    1. Финальное оценивание сотрулника рекрутером на встрече.
    2. Показ списка оценок сотрудника и руководителя по блокам компетенций.
    3. Выставление ректрутером итоговой оценки по всем компетенциям.
    4. Возможность постановки задачи для сотрудника. (реализация?)
    
    Bad cases:  
    - Ошибка при загрузке оценок;
    - Ошибка при отпраке данных при завершении оценивания;
    
7. ##### AssessmentSettings (доступно только для Рекрутера)
    1. Основные настройки модуля.
    2. Три секций со списком должностей, блоков должности и компетеций блока.
    3. Имеется возможность добавления, изменения, удаление любого пункта из трёх списков списка (модальное окно)
    4. Изначально отображается только список должностей. 
    Далее при выборе конкретной должности зашружается список блоков и т.д.
    
    Bad cases:  
    - Ошибка при загрузке списков;
    - Ошибка при отправке изменений/добавлению пункта (не введены данные, ощибка при отправке запроса); 
    
8. ##### AssessmentProcess 
    1. Таблица с состоянием всех оцениваний.
    2. Возможность создание нового/изменения имеющихся оцениваний. (?реализация)
    
    Bad cases:  
    - Ошибка при загрузке таблицы;
    - Ошибка при отправке изменений/добавлению; 
      
      
  
### Versions
___
##### 0.0.0
Подбор компонентов сборки, обдумывание deployment'a
 
##### 0.1.0

1. Cоздание конфигурации webpack (dev, prod).
2. Создание Dockerfile и docker-compose: 
3. Развёртывание b2b (Валера)  
4. Освоение технологий ConnectedRouter и GSAP  

##### 0.2.0

1. Настройка Jest, Enzyme **(8h)**
2. Api Service - тестирование всех http-методов **(16h)**
3. Добавление ядра Redux (reducer, actions, middleware, selectors), тестирование **(8h)**
4. ConnectedRouter - создать страницы и связи между ними, разбор дизайна **(8h)**

##### 0.3.0

1. Страница списка оцениваний - верстка модуля, тесты (coverage 100%), работа с Redux
2. Navigation - верстка модуля, тесты (coverage 100%)
3. Заголовок модуля - верстка модуля, тесты (coverage 100%)
4. Sidebar - верстка модуля, тесты (coverage 100%), работа с Redux


##### 0.4.0

1. Страница "Оценивание" Верстка, расписать бизнеслогику
2. Страница "Настройки" Верстка, расписать бизнеслогику
3. Страница "Оценивание HR" Верстка, расписать бизнеслогику
4. Страница "Компетенции" Верстка, расписать бизнеслогику
5. Страница "Процесс оценки + добавление\изменение оценивания" Верстка, расписать бизнеслогику 


### TODO: 
1. Create preloader for pages, when user is loading
2. Create error page
3. Create forbidden page
4. Create tests for layout render according to fetched user data (error, loading, unknown fetched user data)
5. Create test for page permissions


### Developer
___

[![Dmitry Byrchenko](https://avatars2.githubusercontent.com/u/15804241?s=144)](https://github.com/byrchenko)

[Dmitry Byrchenko](https://github.com/byrchenko)